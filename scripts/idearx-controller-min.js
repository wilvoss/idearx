Vue.config.devtools=!1,Vue.config.debug=!1,Vue.config.silent=!0,Vue.config.ignoredElements=["app"];var app=new Vue({el:"#app",data:{appDataVersion:"0.0.017",newVersionAvailable:!1,currentIdeaSet:new IdeaSetObject({}),currentIdeas:null,currentSelectedIdea:null,allMethods:Methods,allIdeaSets:IdeaSets,currentMethod:new MethodObject({}),currentMethodType:"",currentExerciseIsDirty:!1,selectedIdeasPath:[],allSelectedIdeas:[],allDeSelectedIdeas:[],visualStateShowNofication:!1,visualStateShowModal:!1},methods:{async IntializeApp(){note("InitializeApp() called")},async SelectIdeaSet(e){if(note("SelectIdeaSet() called"),this.currentIdeaSet=void 0===e?this.currentIdeaSet:e,null!==this.currentIdeaSet.data){let e=await this.getCurrentIdeasJSON;this.currentIdeas=createNestedIdeaObject(e),this.currentMethod=this.currentIdeaSet.method,this.RestartExercise()}},SelectIdea(e,t=!0){note("SelectIdea(_idea) called");let a=0;e.parent.children&&e.parent.children.length>0&&(a=e.parent.children.length,Array.from(e.parent.children).forEach((e=>{e.isSelected=!1,(e.showing||"binary"!==this.currentMethod.value)&&(e.seen=!0),e.seen&&(a-=1)}))),e.isSelected=!0,0!==a&&"binary"===this.currentMethod.value||(this.currentSelectedIdea=e,this.selectedIdeasPath.push(e)),this.allSelectedIdeas.push(e),t&&this.CleanDeselectedArrayBasedOnAncestry(e),this.currentExerciseIsDirty=!0,this.MoveFocus()},MoveFocus(){note("MoveFocus() called"),this.$nextTick((()=>{void 0===this.getLastSelectedIdea||this.getLastSelectedIdea.children.length>0||0===this.selectedIdeasPath.length?document.getElementsByTagName("idea")[0].focus():document.getElementById("button-restart").focus()}))},UndoLastIdea(){if(note("UndoLastIdea() called"),this.allSelectedIdeas.length>0){note("UndoLastIdea() called");let e=this.allSelectedIdeas.pop();this.allDeSelectedIdeas.push(e),e&&(this.getLastSelectedIdea===e?(this.selectedIdeasPath.pop(),void 0!==e.parent?e.parent===this.currentIdeas?this.RestartExercise():(this.currentSelectedIdea=e.parent,e.parent.children.forEach((e=>{this.ResetIdea(e,!0),this.MoveFocus()}))):this.RestartExercise(e)):(this.ResetIdea(e,!0),this.MoveFocus()))}},RedoLastIdea(){if(note("RedoLastIdea() called"),this.allDeSelectedIdeas.length>0){note("RedoLastIdea() called");let e=this.allDeSelectedIdeas.pop();e?this.SelectIdea(e,!1):this.MoveFocus()}},RestartExercise(){note("RestartExercise() called"),this.selectedIdeasPath=[],this.allSelectedIdeas=[],this.currentExerciseIsDirty=!1,this.currentSelectedIdea=this.currentIdeas,this.currentMethodType=this.currentMethod.value,this.ResetIdea(this.currentIdeas),this.currentIdeas.isSelected=!0,this.currentIdeas.seen=!0,this.MoveFocus()},GetSelectedIdeas(e){if(note('GetSelectedIdeas("'+e.name+'") called'),!e.isSelected)return null;const t=e.children.map(this.GetSelectedIdeas).filter((e=>null!==e));return{...e,children:t}},CleanDeselectedArrayBasedOnAncestry(e){let t=new Set,a=e;for(;a;)t.add(a),a=a.parent;this.allDeSelectedIdeas=this.allDeSelectedIdeas.filter((e=>{t.has(e)&&this.currentIdeas}))},ResetIdea(e,t=!1){t&&highlight('Undoing "'+e.name+'"'),e.isSelected=!1,e.seen=!1,e.showing=!1,e.children&&e.children.length>0&&e.children.forEach((e=>{this.ResetIdea(e)}))},HandleKeyDown(e){switch(note("HandleKeyDown() called"),e.key){case"z":case"Z":this.currentMethod.allowUndo&&e.metaKey&&(e.shiftKey?this.RedoLastIdea():this.UndoLastIdea());break;default:break}}},mounted(){announce("App Initialized"),this.IntializeApp(),window.addEventListener("keydown",this.HandleKeyDown)},computed:{getCurrentIdeasJSON:async function(){note("getCurrentIdeasJSON() called");let e=[],t=this.currentIdeaSet.data.map((e=>fetch(e).then((e=>e.json()))));try{let a=await Promise.all(t);e=[].concat(...a)}catch(e){e(e)}return e[0]},getIdeasFromCurrentLevelBasedOnMethod:function(){if(note("getRandomIdeasFromCurrentIdeasLevel() called"),null===this.currentIdeas)return[];let e=(null===this.currentSelectedIdea.parent?this.currentSelectedIdea:this.currentSelectedIdea.parent).children;0===e.filter((e=>!e.seen&&!e.isSelected)).length&&(e=this.currentSelectedIdea.children);const t=1===e.filter((e=>e.isSelected)).length?e.filter((e=>e.isSelected))[0]:null;let a=[];switch(this.currentMethod.value){case"binary":a=e.filter((e=>!e.seen&&!e.isSelected));for(let e=a.length-1;e>0;e--){const t=Math.floor(Math.random()*(e+1));[a[e],a[t]]=[a[t],a[e]]}if(null===t){let e=a.slice(0,2);return e.forEach((e=>{e.showing=!0})),e}{const e=a.slice(0,1);e[0].showing=!0;const s=[e[0],t];s.sort((()=>Math.random()-.5)),a=s}break;case"full":a=e.filter((e=>!e.seen&&!e.isSelected)),a.sort(((e,t)=>e.name<t.name?-1:e.name>t.name?1:0));break;case"merge":default:break}return a},getLastSelectedIdea:function(){return this.selectedIdeasPath[this.selectedIdeasPath.length-1]},getAllSelectedIdeasRecursively:function(){return note("getAllSelectedIdeasRecursively() called"),this.GetSelectedIdeas(this.currentIdeas)}}});